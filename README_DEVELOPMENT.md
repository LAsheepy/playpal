# PlayPal å¼€å‘æ–‡æ¡£

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

PlayPal æ˜¯ä¸€ä¸ªåŸºäº Vue 3 + Supabase çš„çº¦çƒå¹³å°ï¼Œæ”¯æŒåŒ¹å…‹çƒã€ç½‘çƒã€ç¾½æ¯›çƒç­‰å¤šç§çƒç±»è¿åŠ¨çš„çº¦çƒåŠŸèƒ½ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue 3 + Vite
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router
- **UIç»„ä»¶**: Vant UI
- **æ„å»ºå·¥å…·**: Vite

### åç«¯æŠ€æœ¯æ ˆ
- **æ•°æ®åº“**: PostgreSQL (Supabase)
- **è®¤è¯**: Supabase Auth
- **å®æ—¶åŠŸèƒ½**: Supabase Realtime
- **API**: Supabase REST API

### æ•°æ®åº“æ¶æ„

#### æ ¸å¿ƒè¡¨ç»“æ„
1. **profiles** - ç”¨æˆ·èµ„æ–™è¡¨
2. **matches** - çƒå±€è¡¨
3. **match_participants** - çƒå±€å‚ä¸è€…è¡¨
4. **messages** - èŠå¤©æ¶ˆæ¯è¡¨
5. **notifications** - é€šçŸ¥è¡¨

#### å…³é”®ç‰¹æ€§
- è¡Œçº§å®‰å…¨ç­–ç•¥ (RLS)
- å®æ—¶æ•°æ®åŒæ­¥
- æ€§èƒ½ä¼˜åŒ–ç´¢å¼•
- è‡ªåŠ¨è§¦å‘å™¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 16+
- npm æˆ– yarn

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¼€å‘æ¨¡å¼
```bash
npm run dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

## ğŸ“Š æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•
- æ•°æ®åº“è¿æ¥æµ‹è¯•
- API æ¥å£æµ‹è¯•
- ç”¨æˆ·è®¤è¯æµ‹è¯•

### 2. é›†æˆæµ‹è¯•
- å‰åç«¯æ•°æ®æµæµ‹è¯•
- å®æ—¶åŠŸèƒ½æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•

### 3. æ€§èƒ½æµ‹è¯•
- API å“åº”æ—¶é—´æµ‹è¯•
- å¹¶å‘è¯·æ±‚æµ‹è¯•
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½æµ‹è¯•

### 4. ç«¯åˆ°ç«¯æµ‹è¯•
- ç”¨æˆ·æ³¨å†Œç™»å½•æµç¨‹
- çƒå±€åˆ›å»ºåŠ å…¥æµç¨‹
- å®æ—¶æ¶ˆæ¯åŠŸèƒ½

## ğŸ”§ å¼€å‘æŒ‡å—

### æ•°æ®åº“æ“ä½œ

#### ç”¨æˆ·è®¤è¯
```javascript
import { authApi } from './utils/supabase'

// ç”¨æˆ·æ³¨å†Œ
const { data, error } = await authApi.signUp(email, password, userData)

// ç”¨æˆ·ç™»å½•
const { data, error } = await authApi.signIn(email, password)
```

#### çƒå±€æ“ä½œ
```javascript
import { matchApi } from './utils/supabase'

// è·å–çƒå±€åˆ—è¡¨
const { data, error } = await matchApi.getMatches(filters)

// åˆ›å»ºçƒå±€
const { data, error } = await matchApi.createMatch(matchData)

// åŠ å…¥çƒå±€
const { error } = await matchApi.joinMatch(matchId, userId)
```

#### å®æ—¶åŠŸèƒ½
```javascript
import { realtimeApi } from './utils/supabase'

// è®¢é˜…çƒå±€å˜åŒ–
const subscription = realtimeApi.subscribeToMatches(callback)

// è®¢é˜…æ¶ˆæ¯
const subscription = realtimeApi.subscribeToMessages(matchId, callback)
```

### é”™è¯¯å¤„ç†

ç³»ç»Ÿé‡‡ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

```javascript
// æ‰€æœ‰ API è°ƒç”¨è¿”å› { data, error } æ ¼å¼
try {
  const { data, error } = await someApiCall()
  
  if (error) {
    // å¤„ç†ç‰¹å®šé”™è¯¯ç±»å‹
    if (error.message.includes('network')) {
      // ç½‘ç»œé”™è¯¯å¤„ç†
    } else if (error.message.includes('auth')) {
      // è®¤è¯é”™è¯¯å¤„ç†
    }
  } else {
    // æˆåŠŸå¤„ç†
  }
} catch (error) {
  // å¼‚å¸¸å¤„ç†
}
```

## ğŸ¨ å‰ç«¯ç»„ä»¶

### æ ¸å¿ƒç»„ä»¶
- **Login.vue** - ç™»å½•é¡µé¢
- **Home.vue** - é¦–é¡µ/çƒå±€åˆ—è¡¨
- **CreateMatch.vue** - åˆ›å»ºçƒå±€
- **MatchDetail.vue** - çƒå±€è¯¦æƒ…
- **Profile.vue** - ç”¨æˆ·èµ„æ–™

### çŠ¶æ€ç®¡ç†

#### User Store
ç®¡ç†ç”¨æˆ·è®¤è¯çŠ¶æ€å’Œèµ„æ–™
```javascript
const userStore = useUserStore()

// ç”¨æˆ·ç™»å½•
await userStore.login(email, password)

// æ›´æ–°ç”¨æˆ·èµ„æ–™
await userStore.updateUserInfo(profileData)
```

#### Match Store
ç®¡ç†çƒå±€ç›¸å…³çŠ¶æ€
```javascript
const matchStore = useMatchStore()

// åŠ è½½çƒå±€åˆ—è¡¨
await matchStore.loadMatches()

// åˆ›å»ºçƒå±€
await matchStore.createMatch(matchData)
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### è®¤è¯å®‰å…¨
- JWT Token è®¤è¯
- å¯†ç å¼ºåº¦éªŒè¯
- ä¼šè¯ç®¡ç†

### æ•°æ®å®‰å…¨
- è¡Œçº§å®‰å…¨ç­–ç•¥ (RLS)
- è¾“å…¥éªŒè¯
- SQL æ³¨å…¥é˜²æŠ¤

### ç½‘ç»œå®‰å…¨
- HTTPS åŠ å¯†
- CORS é…ç½®
- è¯·æ±‚é¢‘ç‡é™åˆ¶

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–
- ç´¢å¼•ä¼˜åŒ–
- æŸ¥è¯¢ä¼˜åŒ–
- è¿æ¥æ± 

### å‰ç«¯ä¼˜åŒ–
- ä»£ç åˆ†å‰²
- æ‡’åŠ è½½
- ç¼“å­˜ç­–ç•¥

### API ä¼˜åŒ–
- æ‰¹é‡æ“ä½œ
- åˆ†é¡µæŸ¥è¯¢
- å“åº”å‹ç¼©

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ Supabase é¡¹ç›®é…ç½®
   - éªŒè¯ API å¯†é’¥
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

2. **è®¤è¯é—®é¢˜**
   - æ£€æŸ¥ç”¨æˆ·é‚®ç®±éªŒè¯çŠ¶æ€
   - éªŒè¯å¯†ç å¼ºåº¦
   - æ£€æŸ¥ä¼šè¯çŠ¶æ€

3. **å®æ—¶åŠŸèƒ½å¼‚å¸¸**
   - æ£€æŸ¥ WebSocket è¿æ¥
   - éªŒè¯è®¢é˜…æƒé™
   - æ£€æŸ¥ç½‘ç»œé˜²ç«å¢™

### è°ƒè¯•å·¥å…·

#### æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- Network æ ‡ç­¾æŸ¥çœ‹ API è¯·æ±‚
- Console æ ‡ç­¾æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
- Application æ ‡ç­¾æŸ¥çœ‹å­˜å‚¨çŠ¶æ€

#### Supabase Dashboard
- å®æ—¶æŸ¥çœ‹æ•°æ®åº“æ“ä½œ
- ç›‘æ§ API ä½¿ç”¨æƒ…å†µ
- è°ƒè¯•è®¤è¯æµç¨‹

## ğŸ“š æ‰©å±•å¼€å‘

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ•°æ®åº“æ‰©å±•**
   - åœ¨ `enhanced_supabase_setup.sql` ä¸­æ·»åŠ è¡¨ç»“æ„
   - æ›´æ–°è¡Œçº§å®‰å…¨ç­–ç•¥
   - åˆ›å»ºå¿…è¦çš„ç´¢å¼•

2. **API æ‰©å±•**
   - åœ¨ `src/utils/supabase.js` ä¸­æ·»åŠ æ–°çš„ API å‡½æ•°
   - å®ç°ç›¸åº”çš„é”™è¯¯å¤„ç†
   - æ·»åŠ ç±»å‹å®šä¹‰

3. **å‰ç«¯æ‰©å±•**
   - åˆ›å»ºæ–°çš„ Vue ç»„ä»¶
   - æ›´æ–°è·¯ç”±é…ç½®
   - æ·»åŠ çŠ¶æ€ç®¡ç†

### éƒ¨ç½²æŒ‡å—

#### ç”Ÿäº§ç¯å¢ƒé…ç½®
1. è®¾ç½®ç¯å¢ƒå˜é‡
2. é…ç½®åŸŸåå’Œ SSL
3. è®¾ç½® CDN å’Œç¼“å­˜

#### ç›‘æ§å’Œæ—¥å¿—
1. è®¾ç½®é”™è¯¯ç›‘æ§
2. é…ç½®æ€§èƒ½ç›‘æ§
3. è®¾ç½®æ—¥å¿—æ”¶é›†

## ğŸ¤ è´¡çŒ®æŒ‡å—

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ ESLint + Prettier
- éµå¾ª Vue 3 æœ€ä½³å®è·µ
- ç¼–å†™æ¸…æ™°çš„æ³¨é‡Š

### æäº¤è§„èŒƒ
- ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯
- ä¸€ä¸ªåŠŸèƒ½ä¸€ä¸ªæäº¤
- åŒ…å«æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•è¦æ±‚
- æ–°åŠŸèƒ½å¿…é¡»åŒ…å«æµ‹è¯•
- ä¿æŒæµ‹è¯•è¦†ç›–ç‡
- æµ‹è¯•ç”¨ä¾‹è¦å…¨é¢

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¼€å‘å›¢é˜Ÿ
- å‰ç«¯å¼€å‘: Vue.js ä¸“å®¶
- åç«¯å¼€å‘: Supabase ä¸“å®¶
- æ•°æ®åº“è®¾è®¡: PostgreSQL ä¸“å®¶

### æ–‡æ¡£èµ„æº
- [Supabase å®˜æ–¹æ–‡æ¡£](https://supabase.com/docs)
- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://v3.vuejs.org/)
- [Vant UI æ–‡æ¡£](https://vant-ui.github.io/vant/#/zh-CN/)

---

**PlayPal - è®©çº¦çƒæ›´ç®€å•ï¼** ğŸ¾ğŸ¸ğŸ¯