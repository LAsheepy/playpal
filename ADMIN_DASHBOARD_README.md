# 管理员数据总览页面使用说明

## 功能概述

管理员数据总览页面为系统管理员提供了一个全面的数据可视化平台，包含以下核心功能模块：

1. **数据概览卡片** - 显示关键指标统计
2. **用户水平分布统计** - 按运动项目分类的用户水平分布
3. **用户列表展示** - 所有注册用户的详细信息
4. **球局信息展示** - 当前所有球局的完整信息

## 访问方式

### 1. 管理员账号要求
- 必须使用 `admin@playpal.com` 邮箱账号登录
- 普通用户无法访问管理员页面
- 系统会自动检查管理员权限

### 2. 访问路径
- 在浏览器中访问：`http://localhost:5173/admin`
- 或直接导航到 `/admin` 路径

### 3. 权限验证
- 页面加载时会自动验证当前登录用户是否为管理员
- 非管理员用户会被重定向到首页
- 权限检查基于邮箱地址验证

## 功能模块详解

### 数据概览卡片
- **总用户数** - 系统注册用户总数
- **今日新增** - 当天注册的新用户数量
- **活跃用户** - 最近7天有活动的用户数量
- **总球局数** - 系统创建的球局总数
- **今日新增球局** - 当天创建的球局数量
- **运动类型** - 当前支持的运动项目数量

### 用户水平分布统计
- **匹克球水平分布** - 显示各等级用户数量（2.0-5.0+）
- **网球水平分布** - 显示各等级用户数量（2.0-5.0+）
- **羽毛球水平分布** - 显示各等级用户数量（初级/进阶/专业）
- **可视化柱状图** - 直观展示各水平用户数量对比

### 用户列表
- **完整用户信息** - 显示所有注册用户的详细信息
- **注册时间** - 用户注册的具体时间
- **运动水平标签** - 显示用户的匹克球水平
- **实时数据** - 直接从Supabase数据库获取最新数据

### 球局列表
- **球局详情** - 显示所有球局的完整信息
- **创建者信息** - 显示球局创建者的昵称
- **参与人数** - 当前参与人数/最大人数限制
- **时间地点** - 球局的具体时间和地点

## 技术特性

### 实时数据连接
- 所有数据实时连接Supabase数据库
- 确保展示的数据为最新真实数据
- 支持手动刷新获取最新数据

### 权限安全
- 严格的权限验证机制
- 仅允许管理员账号访问
- 自动重定向非授权用户

### 响应式设计
- 适配桌面和移动设备
- 优化的移动端交互体验
- 自适应屏幕尺寸

### 性能优化
- 分页加载用户和球局列表
- 异步数据加载避免页面卡顿
- 错误处理和加载状态提示

## 使用步骤

1. **登录管理员账号**
   - 使用 `admin@playpal.com` 登录系统
   - 确保登录状态正常

2. **访问管理员页面**
   - 在浏览器地址栏输入 `/admin`
   - 或通过导航菜单访问（如果添加了入口）

3. **查看数据概览**
   - 页面加载后首先显示数据概览卡片
   - 查看关键指标统计数据

4. **分析用户分布**
   - 查看各运动项目的用户水平分布
   - 分析用户技能水平的整体情况

5. **浏览用户列表**
   - 滚动查看所有注册用户
   - 查看用户的详细信息和注册时间

6. **检查球局信息**
   - 浏览所有创建的球局
   - 查看球局的参与情况和详细信息

7. **刷新数据**
   - 点击"刷新"按钮获取最新数据
   - 系统会重新加载所有统计信息

## 开发说明

### 文件结构
```
src/
├── pages/
│   └── AdminDashboard.vue      # 管理员页面主组件
├── utils/
│   └── adminApi.js             # 管理员专用API函数
└── main.js                     # 路由配置更新
```

### API接口
- `adminApi.isAdmin()` - 检查管理员权限
- `adminApi.getAllUsers()` - 获取所有用户列表
- `adminApi.getAllMatches()` - 获取所有球局信息
- `adminApi.getUserLevelStats()` - 获取用户水平统计
- `adminApi.getUserCountStats()` - 获取用户数量统计
- `adminApi.getMatchStats()` - 获取球局统计

### 数据安全
- 所有API调用都包含权限验证
- 数据库查询使用安全的Supabase客户端
- 错误处理和异常捕获机制完善

## 测试验证

运行测试脚本验证功能：
```bash
node test_admin_dashboard.js
```

## 注意事项

1. **数据隐私** - 管理员页面包含敏感用户信息，请妥善保管管理员账号
2. **权限管理** - 确保只有授权人员可以访问管理员功能
3. **数据更新** - 统计数据为实时数据，反映系统当前状态
4. **网络连接** - 需要稳定的网络连接确保数据正常加载

## 技术支持

如遇到问题，请检查：
- 管理员账号是否正确登录
- 网络连接是否正常
- Supabase数据库连接是否正常
- 浏览器控制台是否有错误信息

---

**版本**: 1.0.0  
**最后更新**: 2024-01-18  
**维护者**: PlayPal开发团队